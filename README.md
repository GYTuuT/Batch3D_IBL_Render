# Batch 3D Viewer

批量本地/远程点云查看器

### 安装依赖
``` bash
pip install -r requirements.txt
```
### 启动

1. 双击```run.bat```(使用环境变量中的python)；
2. 或者直接 ```python Batch3D.py```。

### 查看文件

#### 存储格式
支持的文件格式为```.pkl```，```.npy```，```.npz```，```.ply```,```obj```, ```stl```等。


```.pkl```，```.npy```，```.npz```使用二进制形式保存字典类型数据，参考：
``` python
import pickle
import numpy as np

save_dt = {
    'obj1_#00FF00': np.random.rand(100, 3), # 点云
    'obj2_#888888': np.random.rand(100, 3), # 点云
    'obj3_#123456': np.random.rand(100, 2, 3), # 线段
    'obj4_#123456': np.random.rand(2, 8, 3), # 包围框
}

with open("test.pkl", 'wb') as f:
    pickle.dump(save_dt, f)

```

##### 格式
其中，维度为```(..., 3)```，```(..., 6)```或```(..., 7)```的值会被识别为点云，```(..., 2, 3)```的值会被识别为线条，```(..., 8, 3)```的值会被识别为包围框。

##### 批次
高维格式的数据会被识别为批次类型的数据，系统可以为第一个维度进行切片显示。

##### 颜色
可以使用键为点云、线条、包围框指定颜色，只需在键名尾部中加入```'#HHHHHH'```或```'#HHHHHHHH'```的16进制颜色表示即可，当不指定时，系统会自动分配不同颜色。
在为点云指定颜色时，还可以将每个点的属性拼接为```(x, y, z, r, g, b)```或者```(x, y, z, r, g, b, a)```, 即维度为```(N, 6)```或```(N, 7)```。


#### 查看
1. 打开文件夹，右侧列表出现文件名。
2. 点击列表项或是用键盘上或下快速切换。
3. 双击列表项可以重新载入此文件。

#### 远程查看
1. 点击打开远程文件夹，输入服务器IP地址，用户，密码等，系统可以从服务器下载文件并查看。

### 运行脚本

请参考 ```example/```文件夹下的示例。

### 视角控制

相机视角采用方位角，仰角方式控制。使用鼠标左键点击并拖动改变视角，右键点击并拖动改变焦点位置。双击左键可以使镜头重新对准坐标原点。

